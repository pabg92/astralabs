CBA – Clause Architecture & Workflow Overview (MVP Pack v1.0)
Prepared for : Pablo Garner – Champions Lead Developer
Compiled by : ContractBuddy SME Team (Oct 2025)
 
1 Purpose & Scope
This document explains how the Clause Intelligence Layer operates within ContractBuddy v1.0 MVP:
•	Database schema (two-tier LCL + LCSTX simple model with scalable path to hybrid).
•	End-to-end clause creation, reconciliation, and learning workflows.
•	AI/HITL division of labour and guardrails.
•	Immediate MVP priorities and future expansion hooks.
 
2 Schema Overview (MVP – Two-Tier Simple)
Table	Purpose	Key Fields
LCL – Legal Clause Library	Canonical “master” clauses	lcl_clause_id, clause_text_redacted, clause_category, clause_type, risk_level, plain_english_summary, factual_correctness_score, new_clause_flag, timestamps
LCSTX – Standardisation Table	Standardised “safe” forms and metadata	standardisation_id, standardised_clause, risk_level, variation_tolerance, plain_english_summary, clause_synonyms [], ai_notes
Future (v1.1+) – LCSTX_Pattern	Multiple regex patterns per variant	pattern_id, regex_pattern, specificity_score, risk_modifier, timestamps
New Field: factual_correctness_score DECIMAL(3,2)
•	Generated by GPT-CHECK-001 (verifier prompt).
•	Reflects logical and contextual accuracy of AI-drafted text (0–1).
•	Used for UI colour logic and HITL prioritisation.
 
3 New Clause Discovery Workflow
Step	Action	Owner	Outputs
1	Unmatched clause detected (vector similarity < 0.7)	Comparison Engine	Queue event → GPT-NEWCLAUSE-001
2	GPT drafts new LCL/LCSTX rows (redacted, scored, summarised)	AI Engine	Provisional entries + factual_correctness_score
3	System applies temporary risk override	System	Display Amber (default) / Red (if score < 0.7) with tooltip “Pending verification”
4	User sees flagged clause only locally	Frontend	Read-only until HITL approval
5	Admin Review Queue triages new entries	CBA Reviewer	Approve / Edit / Reject → update PLD
6	Weekly batch adds approved clauses to live embeddings	System	Retrain & publish to all users
 

4 Duplicate & Simultaneous Submissions
1.	All pending clauses run vector check vs. live + pending records.
2.	If cosine ≥ 0.92 → merge exact duplicates (submitted_by []).
3.	If 0.85–0.92 → cluster as variants (cluster_id).
4.	Review UI shows cluster for merge/split. Each submitter retains credit.
 
5 Continuous Learning & Variants
•	New variants auto-add if similarity ≥ 0.9 and risk_delta ≤ 1 band.
•	If higher risk or new conditions detected → needs_review = true.
•	User redlines feed PLD + review queue.
•	Low-impact variants update LCSTX directly; material changes HITL.
 

6 AI & HITL Division of Labour
Stage	Actor	Tool	Notes
Clause capture & redaction	GPT-NEWCLAUSE-001	Primary LLM	Deterministic prompt, JSON schema validated
Verification	GPT-CHECK-001	Verifier model	Cross-checks facts, assigns factual_correctness_score
Queue routing & triage	System	Supabase Edge Fns	Auto-prioritises low scores
Review / merge / publish	CBA Admin	HITL UI	Tiered review (T1 auto, T2 review, T3 escalate)
Retraining	System	Weekly batch	Re-embeds approved clauses

 

7 Governance & Access
Layer	Edit Rights	Notes
Central LCL/LCSTX	CBA Admins	Authoritative source
Company Overrides (CLCL set)	Org Admins	Tailored risk rules
User suggestions	All Users	Auto-queued to Admin Review
Review Queue	CBA Team	Full audit trail + PLD entry
		
 

8 Guardrails Summary
•	Strict JSON schema validation for AI outputs.
•	Checksum & verifier prompt before DB insert.
•	Entity redaction regex mandatory.
•	factual_correctness_score < 0.7 = Red UI flag.
•	All auto-approved variants sample-audited weekly.

 
9 Scale & Cost Snapshot
Component	Cost / 100 contracts daily	Notes
Azure Doc Intelligence	~£90	Parsing & chunking
GPT (NEW + CHECK)	~£80	LLM calls (50 clauses avg / contract)
Supabase / pgvector	~£30	DB + storage
Total ≈ £200 / month	–	Scalable to 1 k contracts daily
HITL Ops Team	2–4 FTE (~£1–2 k / month)	Manageable load
 
10 Roadmap & Placeholders
Placeholder	Purpose	ETA
GPT-NEWCLAUSE-001 Prompt Template	Redaction & JSON spec	v1.1 doc
Deduplication Queue Design	Thresholds & UI policy	v1.1
Tiered HITL Workflow Diagram	Roles / SLAs / Escalation	v1.1
Weekly Digest Automation Spec	Change-log feeds	v1.1
 
11 MVP vs Future Phases
Phase	Scope	Complexity
v1.0 MVP	Two-Tier schema, manual HITL, basic dedupe, weekly digest manual	Low
v1.1	Add LCSTX_Pattern, auto variant learning, tiered HITL, digest automation	Med
v2.0	Full hybrid schema, real-time feedback loop, RAG analytics	High
 
Next Action
•	Circulate this pack to Pablo for technical comments.
•	Incorporate any feedback
•	Lock schema v1.0 for implementation
